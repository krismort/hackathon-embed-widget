<link rel="import" href="coinify-shared.html"> <link rel="import" href="coinify-api-behaviour.html"> <dom-module id="coinify-kyc-message"> <style include="coinify-shared"></style> <style>.go-back{text-decoration:underline;cursor:pointer;padding:8px 0 0 3px}</style> <template> <coinify-alert-message id="errorBox" alert-message="[[errorMessage]]"></coinify-alert-message> <h4>Please verify your identity</h4> <div> <p>{{limitMessage}} <coinify-info width="200"> Goverment anti-money laundering laws and regulations require us to verify your identity. </coinify-info> </p> <br> <div hidden$="[[!showNewDailyLimits]]"> <p>Daily limits after verification: (Level 2)</p> <p><span>{{limitCard}}</span> Card | <span>{{limitBank}}</span> Bank</p> </div> </div> <p> </p><div> <button id="startKycButton" on-tap="onContinue" class="btn btn-success pull-right">Verify identity </button> <p class="go-back" on-tap="onGoBack">Go back</p> </div> <p></p> </template> <script>Polymer({is:"coinify-kyc-message",behaviors:[CoinifyApiBehaviour],properties:{traderInfo:{type:Object,notify:!0,observer:"_traderInfoUpdated"},limitCard:{type:String},limitBank:{type:String},paymentMethod:{type:String,notify:!0,observer:"_paymentMethodUpdated"},limitMessage:{type:String},showNewDailyLimits:{type:Boolean,value:!1}},toCurrencyString:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"undefined"==typeof t&&(t="$"),"undefined"==typeof i&&(i="");var n=new RegExp(1..toLocaleString().replace(/^1/,"").replace(/\./,"\\.")+"$");return t+(~~e).toLocaleString().replace(n,"")+(e%1).toFixed(r).toLocaleString().replace(/^[+-]?0+/,"").replace(",",".")+i},_paymentMethodUpdated:function(){"card"==this.paymentMethod?(this.limitMessage="You have reached your yearly trading limit as Level 1, to proceed with further trades we need you to confirm your identity.",this.showNewDailyLimits=!0):"bank"==this.paymentMethod?(this.limitMessage="Before you can proceed with bank transfer payment we need you to confirm your identity.",this.showNewDailyLimits=!0):(this.limitMessage="Before you can proceed with this trade we need you to confirm your identity.",this.showNewDailyLimits=!1)},_traderInfoUpdated:function(){if(this.traderInfo&&this.traderInfo.level){var e=this.traderInfo.nextLevel||this.traderInfo.level,t=e.currency,i=e.limits.card["in"].daily,r=e.limits.bank["in"].daily;"USD"===t?(i=this.toCurrencyString(i,"$",""),r=this.toCurrencyString(r,"$","")):"EUR"===t?(i=this.toCurrencyString(i,"","€"),r=this.toCurrencyString(r,"","€")):(i=this.toCurrencyString(i,"",t),r=this.toCurrencyString(r,"",t)),this.limitCard=i,this.limitBank=r}},onGoBack:function(){this.fire("cancel",null,{bubbles:!1})},onContinue:function(){this.fire("continue",null,{bubbles:!1})}})</script> </dom-module>