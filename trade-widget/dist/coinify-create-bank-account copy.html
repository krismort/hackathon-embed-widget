<link rel="import" href="coinify-shared.html"> <link rel="import" href="coinify-api-behaviour.html"> <link rel="import" href="../../iron-input/iron-input.html"> <dom-module id="coinify-create-bank-account"> <template> <style include="coinify-shared">.asteriskField{color:red}.add-bank-button{background:0 0!important;border:none;padding:0!important;font:inherit}</style> <iron-ajax id="createIntBankAccount" headers="{{ajaxHeaders}}" url="{{coinifyApiBaseUrl}}/bank-accounts" method="POST" body="{{intBankAccount}}" content-type="application/json" on-response="_handleIntApiResponse" on-error="_handleApiError" handle-as="json"> </iron-ajax> <iron-ajax id="createDanishBankAccount" headers="{{ajaxHeaders}}" url="{{coinifyApiBaseUrl}}/bank-accounts" method="POST" body="{{danishBankAccount}}" content-type="application/json" on-response="_handleDanishApiResponse" on-error="_handleApiError" handle-as="json"> </iron-ajax> <coinify-alert-message id="errorBox" alert-message="[[errorMessage]]"></coinify-alert-message> <div class="panel-group"> <div class="panel panel-default"> <div class="panel-heading"> <h4 class="panel-title"> <button class="add-bank-button" on-tap="_toggleIntBankForm">Add international bank account</button> </h4> </div> <div id="intBankCollapse" class="panel-collapse collapse"> <div class="panel-body"> <div class="container-fluid"> <form id="intBankForm" on-submit="_submitCreateIntBankAccount"> <div class="row"> <div class="col-sm-6"> <h4>Bank</h4> <div class="form-group"> <label class="control-label requiredField" for="bank-name"> Bank Name<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.bank.name}}" class="form-control" id="bank-name" type="text" maxlength="255" required> </div> <div class="form-group"> <label class="control-label requiredField" for="account-bic"> Bank SWIFT/BIC<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.account.bic}}" class="form-control" id="account-bic" type="text" maxlength="255" required> </div> <div class="form-group"> <label class="control-label requiredField" for="account-number"> Account number (IBAN)<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.account.number}}" class="form-control" id="account-number" type="text" maxlength="255" required> </div> <div class="form-group"> <label class="control-label requiredField" for="account-currency"> Account currency<span class="asteriskField">*</span> </label> <select class="select form-control" id="account-currency" value="{{intBankAccount.account.currency::change}}" required> <option value="">Select currency</option> <option value="EUR">EUR</option> <option value="USD">USD</option> <option value="GBP">GBP</option> <option value="DKK">DKK</option> </select> </div> <h4>Bank address</h4> <div class="form-group"> <label class="control-label requiredField" for="bank-address-country"> Country<span class="asteriskField">*</span> </label> <select required value="{{intBankAccount.bank.address.country::change}}" class="select form-control" id="bank-address-country"> <option value="">Select country</option> <template is="dom-repeat" items="{{countries}}"> <option value="{{item.code}}">{{item.name}}</option> </template> </select> </div> <div class="form-group"> <label class="control-label requiredField" for="bank-address-state"> State<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.bank.address.state}}" class="form-control" id="bank-address-state" type="text" maxlength="64"> </div> </div> <div class="col-sm-6"> <h4>Account holder</h4> <div class="form-group"> <label class="control-label requiredField" for="holder-name"> Full name<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.holder.name}}" class="form-control" id="holder-name" type="text" maxlength="50"> </div> <div class="form-group"> <label class="control-label requiredField" for="holder-address-street"> Street and number<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.holder.address.street}}" class="form-control" id="holder-address-street" maxlength="255" type="text"> </div> <div class="form-group"> <label class="control-label" for="holder-address-zipcode"> Zip/Postal code<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.holder.address.zipcode}}" class="form-control" id="holder-address-zipcode" maxlength="20" type="text"> </div> <div class="form-group"> <label class="control-label requiredField" for="holder-address-city"> City<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.holder.address.city}}" class="form-control" id="holder-address-city" maxlength="64" type="text"> </div> <div class="form-group"> <label class="control-label requiredField" for="holder-address-state"> State<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{intBankAccount.holder.address.state}}" class="form-control" id="holder-address-state" maxlength="64" type="text"> </div> <div class="form-group"> <label class="control-label requiredField" for="holder-address-country"> Country<span class="asteriskField">*</span> </label> <select required value="{{intBankAccount.holder.address.country::change}}" class="select form-control" id="holder-address-country"> <option value="">Select country</option> <template is="dom-repeat" items="{{countries}}"> <option value="{{item.code}}">{{item.name}}</option> </template> </select> </div> <div class="form-group pull-right"> <div> <button class="btn btn-default" on-tap="_cancelCreateIntBankAccount" type="button"> Cancel </button> <button class="btn btn-success" type="submit"> Add bank account </button> </div> </div> </div> </div> </form> </div> </div> </div> </div> </div> <div class="panel-group"> <div class="panel panel-default"> <div class="panel-heading"> <h4 class="panel-title"> <button class="add-bank-button" on-tap="_toggleDanishBankForm">Add danish bank account</button> </h4> </div> <div id="danishBankCollapse" class="panel-collapse collapse"> <div class="panel-body"> <div class="container-fluid"> <form id="danishBankForm" on-submit="_submitCreateDanishBankAccount"> <div class="row"> <div class="col-sm-6"> <h4>Bank</h4> <div class="form-group"> <label class="control-label" for="danish-bank-name"> Bank Name </label> <input is="iron-input" bind-value="{{danishBankAccount.bank.name}}" class="form-control" id="danish-bank-name" maxlength="255" type="text"> </div> <div class="form-group"> <label class="control-label requiredField" for="danish-account-bic"> Bank REG number<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{danishBankAccount.account.bic}}" class="form-control" id="danish-account-bic" type="text" maxlength="255" required> </div> <div class="form-group"> <label class="control-label requiredField" for="danish-account-number"> Account number<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{danishBankAccount.account.number}}" class="form-control" id="danish-account-number" type="text" maxlength="255" required> </div> <div class="form-group"> <label class="control-label requiredField" for="danish-account-currency"> Account currency<span class="asteriskField"></span> </label> <input class="form-control" is="iron-input" bind-value="{{danishBankAccount.account.currency}}" id="danish-account-currency" disabled="true"> </div> </div> <div class="col-sm-6"> <h4>Account holder</h4> <div class="form-group"> <label class="control-label requiredField" for="danish-holder-name"> Full name<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{danishBankAccount.holder.name}}" class="form-control" id="danish-holder-name" type="text" maxlength="50" required> </div> <div class="form-group"> <label class="control-label requiredField" for="danish-holder-address-street"> Street and number<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{danishBankAccount.holder.address.street}}" class="form-control" id="danish-holder-address-street" type="text" maxlength="255" required> </div> <div class="form-group"> <label class="control-label" for="danish-holder-address-zipcode"> Zip/Postal code<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{danishBankAccount.holder.address.zipcode}}" class="form-control" id="danish-holder-address-zipcode" type="text" maxlength="20" required> </div> <div class="form-group"> <label class="control-label requiredField" for="danish-holder-address-city"> City<span class="asteriskField">*</span> </label> <input is="iron-input" bind-value="{{danishBankAccount.holder.address.city}}" class="form-control" id="danish-holder-address-city" type="text" maxlength="64" required> </div> <div class="form-group pull-right"> <button class="btn btn-default" on-tap="_cancelCreateDanishBankAccount" type="button"> Cancel </button> <button class="btn btn-success" type="submit"> Add bank account </button> </div> </div> </div> </form> </div> </div> </div> </div> </div> </template> <script>Polymer({is:"coinify-create-bank-account",behaviors:[CoinifyApiBehaviour],properties:{intBankAccount:{type:Object,value:{account:{currency:""},bank:{address:{country:""}},holder:{address:{country:""}}}},danishBankAccount:{type:Object,value:{account:{currency:"DKK"},bank:{address:{country:"DK"}},holder:{address:{state:"Denmark",country:"DK"}}}},countries:{type:Object,value:[{name:"Austria",code:"AT"},{name:"Belgium",code:"BE"},{name:"Bulgaria",code:"BG"},{name:"Croatia",code:"HR"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Estonia",code:"EE"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"Germany",code:"DE"},{name:"Greece",code:"GR"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"Ireland",code:"IE"},{name:"Italy",code:"IT"},{name:"Latvia",code:"LV"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Malta",code:"MT"},{name:"Monaco",code:"MC"},{name:"Netherlands",code:"NL"},{name:"Norway",code:"NO"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Romania",code:"RO"},{name:"San Marino",code:"SM"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Spain",code:"ES"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"United Kingdom",code:"GB"}]}},_handleIntApiResponse:function(e){this.fire("created",null,{bubbles:!1}),this._hideIntBankForm(),this.$.intBankForm.reset()},_handleDanishApiResponse:function(e){this.fire("created",null,{bubbles:!1}),this._hideDanishBankForm(),this.$.danishBankForm.reset()},_submitCreateIntBankAccount:function(e){e.preventDefault(),this.$.createIntBankAccount.generateRequest()},_submitCreateDanishBankAccount:function(e){e.preventDefault(),this.$.createDanishBankAccount.generateRequest()},_cancelCreateIntBankAccount:function(e){this._hideIntBankForm(),this.$.intBankForm.reset()},_cancelCreateDanishBankAccount:function(e){this._hideDanishBankForm(),this.$.danishBankForm.reset()},_hideDanishBankForm:function(){$(this.$.danishBankCollapse).collapse("hide")},_showDanishBankForm:function(){$(this.$.danishBankCollapse).collapse("show")},_toggleDanishBankForm:function(){$(this.$.danishBankCollapse).collapse("toggle")},_hideIntBankForm:function(){$(this.$.intBankCollapse).collapse("hide")},_showIntBankForm:function(){$(this.$.intBankCollapse).collapse("show")},_toggleIntBankForm:function(){$(this.$.intBankCollapse).collapse("toggle")}})</script> </dom-module>