<link rel="import" href="coinify-shared.html"> <link rel="import" href="../../iron-input/iron-input.html"> <dom-module id="coinify-currency-input"> <template> <style include="coinify-shared"></style> <style>.input-group{width:100%!important}select{min-width:55px}</style> <div class="form-group"> <div class="input-group"> <input is="iron-input" bind-value="{{amount}}" type="number" step="[[amountInputStep]]" required="required" class="form-control" disabled="[[disableInput]]" on-input="_validate"> <template is="dom-if" if="[[singleCurrency]]"> <span class="input-group-addon">[[singleCurrency]]</span> </template> <template is="dom-if" if="[[!singleCurrency]]"> <span class="input-group-btn" style="width:0"></span> <select class="select-currency form-control input-group-addon" value="{{currencySelected::change}}"> <template is="dom-repeat" items="{{currencies}}" as="currency"> <option>{{currency}}</option> </template> </select> </template> </div> </div> </template> <script>Polymer({is:"coinify-currency-input",properties:{errorMessage:String,currencies:{type:Array,value:["EUR","USD","GBP","DKK"]},singleCurrency:{type:String,computed:"_computeSingleCurrency(currencies)"},currencySelected:{type:String,notify:!0},amount:{type:Number,notify:!0},amountInputStep:{type:Number,computed:"_computeAmountInputStep(currencies)"},disableInput:String},attached:function(){this.resetElement()},_computeSingleCurrency:function(e){return e&&1===e.length?e[0]:""},_computeAmountInputStep:function(e,t){return e&&1===e.length?"BTC"===e[0]?"0.00000001":void 0:e&&e.indexOf("BTC")>-1&&"BTC"===t?"0.00000001":"1"},resetElement:function(){this.singleCurrency?this.currencySelected=this.singleCurrency:this.currencySelected=this.currencies[0],this.amount=null},_validate:function(e){if("insertText"===e.inputType&&"."===e.data){var t=e.target.value;return t&&(0===t.length?t="0":setTimeout(function(){e.target.value=t})),e.preventDefault(),e.stopPropagation(),!0}e.target.value=(e.target.value||"").replace("-","").replace("e","")}})</script> </dom-module>