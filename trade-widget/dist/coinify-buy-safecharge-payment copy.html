<link rel="import" href="coinify-shared.html"> <dom-module id="coinify-buy-safecharge-payment"> <template> <style include="coinify-shared">#sc-container{width:750px;overflow:hidden;min-height:520px;height:520px}#sc-container>iframe{width:100%!important;height:100%!important}</style> <div id="sc-container"> </div> </template> <script>Polymer({is:"coinify-buy-safecharge-payment",properties:{providerPaymentUrl:{type:String,observer:"_initIFrame"}},_initIFrame:function(){var e=this;if(this.providerPaymentUrl){var r=document.createElement("iframe");r.src=""+this.providerPaymentUrl,r.id="iframe",r.width="100%",r.scrolling="no",r.style="border:none;";for(var i=this.$$("#sc-container");i.firstChild;)i.removeChild(i.firstChild);i.appendChild(r),window.addEventListener("message",function(r){if(0==r.data.indexOf("[SC-Embed]")){var i=JSON.parse(r.data.replace("[SC-Embed]",""));"close"==i.command&&("cancelled"==i.param?e.fire("cancel",null,{bubbles:!1}):e.fire("completed",null,{bubbles:!1}))}},!0)}}})</script> </dom-module>